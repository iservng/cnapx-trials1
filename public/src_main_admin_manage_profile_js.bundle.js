"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcnapx_trials"] = self["webpackChunkcnapx_trials"] || []).push([["src_main_admin_manage_profile_js"],{

/***/ "./src/main/admin_manage_profile.js":
/*!******************************************!*\
  !*** ./src/main/admin_manage_profile.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdminManageProfile: () => (/* binding */ AdminManageProfile)\n/* harmony export */ });\n/* harmony import */ var _utils_insert_into_DOM_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/insert_into_DOM.js */ \"./src/utils/insert_into_DOM.js\");\n/* harmony import */ var _utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/toast_it.js */ \"./src/utils/toast_it.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/auth */ \"./node_modules/firebase/auth/dist/esm/index.esm.js\");\n\r\n\r\n\r\n\r\nclass AdminManageProfile \r\n{\r\n\r\n    #_mErrors;\r\n    #mErrorMsg;\r\n    constructor()\r\n    {\r\n        this.#_mErrors = 0;\r\n        this.#mErrorMsg = ``;\r\n    }\r\n\r\n\r\n    //Class Public Api\r\n    createUi()\r\n    {\r\n        if(this.#_mErrors == 0)\r\n        {\r\n            let content = `\r\n                <div class=\"container\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col s12\" style=\"margin-top: 4rem; margin-bottom: 2rem;\">\r\n                            <h6>\r\n                                <b class=\"purple-text\">\r\n                                    Admin Mange Account\r\n                                </b>\r\n                            </h6>\r\n                        </div>\r\n\r\n                        <div class=\"col s12 m4 l4\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col s12\">\r\n                                <div class=\"card-panel z-depth-0\">\r\n                                    <p><b>Change Password</b></p>\r\n                                    <p><div class=\"divider\"></div></p>\r\n                                    <p><a class=\"btn purple darken-3 admin_change_password\">Get Started</a></p>\r\n                                </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col s12 m4 l4\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col s12\">\r\n                                <div class=\"card-panel z-depth-0\">\r\n                                    <p><b>Change Profile Info</b></p>\r\n                                    <p><div class=\"divider\"></div></p>\r\n                                    <p><a class=\"btn purple darken-3 admin_change_profile_info\">Get Started</a></p>\r\n                                </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"col s12 m4 l4\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col s12\">\r\n                                <div class=\"card-panel z-depth-0\">\r\n                                    <p><b>Asign Role</b></p>\r\n                                    <p><div class=\"divider\"></div></p>\r\n                                    <p><a class=\"btn purple darken-3 admin_asign_role\">Get Started</a></p>\r\n                                </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    \r\n                </div>\r\n            `;\r\n            (0,_utils_insert_into_DOM_js__WEBPACK_IMPORTED_MODULE_0__.insertIntoDOM)('main', content);\r\n\r\n            //Register event handler for the \"admin_change_password\"\r\n            if(document.querySelector('.admin_change_password'))\r\n            {\r\n                document.querySelector('.admin_change_password').addEventListener('click', e => {\r\n                    e.preventDefault();\r\n                    this.#enterCurrentlyCredentials();\r\n                }, false);\r\n            }\r\n\r\n        }\r\n        else \r\n        {\r\n            console.log(this.#mErrorMsg);\r\n            (0,_utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', this.#mErrorMsg);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    //Class base utility methods \r\n    #enterCurrentlyCredentials()\r\n    {\r\n        let content = `\r\n        <div class=\"container\">\r\n            <div class=\"row\">\r\n                <div class=\"col s12\" style=\"margin-top: 4rem;\">\r\n                    <b>Enter new Credentials</b>\r\n                </div>\r\n                <div class=\"col s12\">\r\n                    <div class=\"row\">\r\n                        <form class=\"col s12 currentCredForm\">\r\n\r\n                            <div class=\"row\">\r\n                                <div class=\"input-field col s12\">\r\n                                <input id=\"email\" type=\"email\" class=\"validate\">\r\n                                <label for=\"email\">Email</label>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"input-field col s12\">\r\n                                <input id=\"password\" type=\"password\" class=\"validate\">\r\n                                <label for=\"password\">Password</label>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"input-field col s12\">\r\n                                <input type=\"submit\" class=\"btn-small validate\">\r\n                                <label for=\"email\">&nbsp;</label>\r\n                                </div>\r\n                            </div>\r\n                        \r\n                        </form>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col s6\">\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        `;\r\n        (0,_utils_insert_into_DOM_js__WEBPACK_IMPORTED_MODULE_0__.insertIntoDOM)('main', content);\r\n\r\n\r\n\r\n        //Register event handle for the submit of \"currentCredForm\" form\r\n        if(document.querySelector('.currentCredForm'))\r\n        {\r\n            document.querySelector('.currentCredForm').addEventListener('submit', e => {\r\n                e.preventDefault();\r\n                this.#getAndProccessForm(e.target);\r\n            }, false);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    #getAndProccessForm(form)\r\n    {\r\n        let email = form.email.value.trim();\r\n        let password = form.password.value.trim();\r\n\r\n        const auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.getAuth)();\r\n        console.log('auth =', auth);\r\n        const user = auth.currentUser;\r\n        console.log('user =', user);\r\n        if (user !== null) \r\n        {\r\n            // The user object has basic properties such as display name, email, etc.\r\n            // const displayName = user.displayName;\r\n            // const email = user.email;\r\n            // const photoURL = user.photoURL;\r\n            // const emailVerified = user.emailVerified;\r\n\r\n            // The user's ID, unique to the Firebase project. Do NOT use\r\n            // this value to authenticate with your backend server, if\r\n            // you have one. Use User.getToken() instead.\r\n            // const uid = user.uid;\r\n            // ======================\r\n            // Update email\r\n            (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.updateEmail)(user, email).then(() => {\r\n                // Email updated!\r\n                (0,_utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('green', 'Email Updated successfully');\r\n                (0,firebase_auth__WEBPACK_IMPORTED_MODULE_2__.updatePassword)(user, password).then(() => {\r\n                    // Update successful...\r\n                    (0,_utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('green', 'Password Updated successfully');\r\n                    this.#taskCompleted();\r\n                }).catch((error) => {\r\n                    console.log(error.message);\r\n                    console.log(error.code);\r\n                    (0,_utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', 'Password Could not be updated');\r\n                });\r\n                // ...\r\n            }).catch((error) => {\r\n                // An error occurred\r\n                console.log(error.message);\r\n                console.log(error.code);\r\n                (0,_utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', 'Unable to update email');\r\n            }); \r\n            // ============\r\n        }\r\n        else \r\n        {\r\n            (0,_utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', 'Email might be invalid');\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    #taskCompleted()\r\n    {\r\n        let content =  `\r\n        <div class=\"container\">\r\n            <div class=\"row\">\r\n                <div class=\"col s12 center-align\" style=\"margin-top: 4rem;\">\r\n                    <h1 class=\"green-text\">&checkmark;</h1>\r\n                </div>\r\n                <div class=\"col s12 center-align\">\r\n                    <p>The login credentials has been successfully updated!</p>\r\n                </div>\r\n\r\n                <div class=\"col s6\">\r\n                    <a href=\"#\" class=\"btn-large purple darken-3 task_completed\">Task Completed</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        `;\r\n        (0,_utils_insert_into_DOM_js__WEBPACK_IMPORTED_MODULE_0__.insertIntoDOM)('main', content);\r\n\r\n        //Register event handle for \"task_completed\"\r\n        if(document.querySelector('.task_completed'))\r\n        {\r\n            document.querySelector('.task_completed').addEventListener('click', e => {\r\n                e.preventDefault();\r\n                this.#callLogOutClass();\r\n            }, false);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    #callLogOutClass()\r\n    {\r\n\r\n        sessionStorage.clear();\r\n        __webpack_require__.e(/*! import() */ \"src_utils_logout_class_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../utils/logout_class.js */ \"./src/utils/logout_class.js\"))\r\n        .then(m => {\r\n            let logout = new m.Logout();\r\n            logout.logUserOut();\r\n        })\r\n        .catch(error => {\r\n            console.log(error.message);\r\n            (0,_utils_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', 'Unable to load the logout');\r\n        });\r\n    }\r\n\r\n\r\n}\r\n\n\n//# sourceURL=webpack://cnapx-trials/./src/main/admin_manage_profile.js?");

/***/ })

}]);