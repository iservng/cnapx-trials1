"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcnapx_trials"] = self["webpackChunkcnapx_trials"] || []).push([["src_main_open_agents_individual_records_js"],{

/***/ "./src/config_src/app_constants.js":
/*!*****************************************!*\
  !*** ./src/config_src/app_constants.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APP_NAME: () => (/* binding */ APP_NAME),\n/* harmony export */   COMPANY: () => (/* binding */ COMPANY),\n/* harmony export */   DEFAILT_MENU: () => (/* binding */ DEFAILT_MENU)\n/* harmony export */ });\n\r\nconst APP_NAME = 'cnapx';\r\nconst COMPANY = 'iservng';\r\nconst DEFAILT_MENU = [\r\n    `About`,\r\n    `Services`,\r\n    `Signup`,\r\n    `Signin`\r\n];\r\n\n\n//# sourceURL=webpack://cnapx-trials/./src/config_src/app_constants.js?");

/***/ }),

/***/ "./src/main/open_agents_individual_records.js":
/*!****************************************************!*\
  !*** ./src/main/open_agents_individual_records.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAgentsIndivualRecords: () => (/* binding */ OpenAgentsIndivualRecords)\n/* harmony export */ });\n/* harmony import */ var _utils_src_insert_into_DOM_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils_src/insert_into_DOM.js */ \"./src/utils_src/insert_into_DOM.js\");\n/* harmony import */ var _utils_src_toast_it_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils_src/toast_it.js */ \"./src/utils_src/toast_it.js\");\n/* harmony import */ var _config_src_app_constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config_src/app_constants.js */ \"./src/config_src/app_constants.js\");\n/* harmony import */ var _utils_src_small_spinner_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils_src/small_spinner.js */ \"./src/utils_src/small_spinner.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! firebase/firestore */ \"./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass OpenAgentsIndivualRecords \r\n{\r\n    #_mErrors;\r\n    #mErrorMsg;\r\n    #agentsId;\r\n    #collName;\r\n    #db;\r\n    #collRef;\r\n    constructor(agentsId)\r\n    {\r\n        //XrkwbnLDKdY1HYz50aeV\r\n        //XrkwbnLDKdY1HYz50aeV\r\n        this.#_mErrors = 0;\r\n        this.#mErrorMsg = ``;\r\n        this.#collName = 'cnapx-customer';\r\n        this.#db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getFirestore)();\r\n        this.#collRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.collection)(this.#db, this.#collName);\r\n\r\n        if(!agentsId)\r\n        {\r\n            this.#_mErrors++;\r\n            this.#mErrorMsg = `Agents ID not found`;\r\n        }\r\n        else \r\n        {\r\n            this.#agentsId = agentsId.trim();\r\n        }\r\n    }\r\n\r\n\r\n    //Class Public API\r\n    // ==================\r\n    createUi()\r\n    {\r\n        if(this.#_mErrors == 0)\r\n        {\r\n            console.log(this.#agentsId);\r\n\r\n            (0,_utils_src_small_spinner_js__WEBPACK_IMPORTED_MODULE_3__.smallSpinner)('Loading...', 'main');\r\n            let content = `\r\n            <div class=\"container\">\r\n                <div class=\"row\">\r\n                    <div class=\"col s12\" style=\"margin-top: 4rem;\">\r\n                        <b class=\"purple-text\">Individual Customer</b>\r\n                    </div>\r\n                    <div class=\"col s12\" style=\"margin-top: 2rem;\">\r\n                        This is a comprehensive list of all customers currently registered as individual-user by agents.\r\n                    </div>\r\n                    <div class=\"col s12\" style=\"margin-top: 2rem;\">\r\n                        <b class=\"totalCount\"></b>\r\n                    </div>\r\n                    <div class=\"col s12 recordsDiv\" style=\"margin-top: 2rem;\">\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Name</th>\r\n                                    <th>Phone</th>\r\n                                    <th>Email</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody id=\"tbodyRecords\">\r\n                                <tr>\r\n                                    <td>Sunday Gombe</td>\r\n                                    <td>09023789812</td>\r\n                                    <td>sunaday@gmail.com</td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    <div class=\"col s12\" style=\"margin-top: 4rem;\">\r\n                        <P>\r\n                            <small>Powered by </small><b>${_config_src_app_constants_js__WEBPACK_IMPORTED_MODULE_2__.COMPANY}</b>\r\n                        </P>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            `;\r\n            (0,_utils_src_insert_into_DOM_js__WEBPACK_IMPORTED_MODULE_0__.insertIntoDOM)('main', content);\r\n\r\n\r\n            //Query the database\r\n            (0,_utils_src_small_spinner_js__WEBPACK_IMPORTED_MODULE_3__.smallSpinner)('Checking...', '#tbodyRecords');\r\n            let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.query)(this.#collRef, \r\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)('agentCode', '==', `${this.#agentsId}`), \r\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.where)('userType', '==', 'individual'));\r\n\r\n            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getCountFromServer)(q)\r\n            .then(snapShot => {\r\n\r\n                \r\n                document.querySelector('.totalCount').innerHTML = `To number individual customer is <a href=\"#\" class=\"btn-flat white z-depth-0\">${snapShot.data().count}</a>`;\r\n\r\n            })\r\n            .catch(error => {\r\n                console.log(error.message);\r\n                (0,_utils_src_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', 'Unable to count records');\r\n            });\r\n\r\n            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_4__.getDocs)(q)\r\n            .then(snapShot => {\r\n\r\n                if(snapShot.empty)\r\n                {\r\n                    console.log(\"Empty Records\");\r\n                }\r\n                else \r\n                {\r\n                    let output = ``;\r\n                    snapShot.forEach(docs => {\r\n                        console.log(docs);\r\n                        output += `\r\n                            <tr>\r\n                                <td>\r\n                                    <a href=\"#\" class=\"open_specified_customer_details\" data-id=\"${docs.id}\">\r\n                                        ${docs.data().name}\r\n                                    </a>\r\n                                </td>\r\n                                <td>${docs.data().phone}</td>\r\n                                <td>${docs.data().email}</td>\r\n                            </tr>\r\n                        `;\r\n                    });\r\n                    document.querySelector('#tbodyRecords').innerHTML = output;\r\n                    if(document.querySelectorAll('.open_specified_customer_details'))\r\n                    {\r\n                        let allBtbs = document.querySelectorAll('.open_specified_customer_details');\r\n                        allBtbs.forEach((btn, index) => {\r\n                            btn.addEventListener('click', e => {\r\n                                this.#openSpecifiedCustomerDetails(e.target);\r\n                            }, false);\r\n                        });\r\n                    }\r\n                }\r\n                \r\n            })\r\n            .catch(error => {\r\n                console.log(error.message);\r\n                (0,_utils_src_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', 'Error, please check network strength and try again');\r\n            });\r\n\r\n        \r\n\r\n\r\n\r\n\r\n        }\r\n        else \r\n        {\r\n            (0,_utils_src_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', this.#mErrorMsg);\r\n            console.log(this.#mErrorMsg);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    //Class based utility function \r\n    #openSpecifiedCustomerDetails(elemtarget)\r\n    {\r\n        let specifiedCustomerId = elemtarget.dataset.id;\r\n        Promise.all(/*! import() */[__webpack_require__.e(\"src_main_load_specified_user_profile_js\"), __webpack_require__.e(\"src_utils_src_date_4rm_milisec_to_humanReadable_js\")]).then(__webpack_require__.bind(__webpack_require__, /*! ./load_specified_user_profile.js */ \"./src/main/load_specified_user_profile.js\"))\r\n        .then(m => {\r\n            let specified = new m.LoadSpecifiedUserProfile(specifiedCustomerId);\r\n            specified.createUi();\r\n        })\r\n        .catch(error => {\r\n            console.log(error.message);\r\n            (0,_utils_src_toast_it_js__WEBPACK_IMPORTED_MODULE_1__.toastIt)('red', 'Unable to load specified profile');\r\n        });\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://cnapx-trials/./src/main/open_agents_individual_records.js?");

/***/ }),

/***/ "./src/utils_src/small_spinner.js":
/*!****************************************!*\
  !*** ./src/utils_src/small_spinner.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   smallSpinner: () => (/* binding */ smallSpinner)\n/* harmony export */ });\n//SPMALL SPINNER..\r\nlet smallSpinner = (msg = 'Checking...', classname = '.task_wrapper_div') => {\r\n\r\n\r\n\r\n    let content = `\r\n    <div class=\"center-align\" style=\"padding-top: 3rem; padding-bottom: 5rem;\">\r\n        <div class=\"preloader-wrapper small active\">\r\n            <div class=\"spinner-layer spinner-blue-only\">\r\n\r\n                  <div class=\"circle-clipper left\">\r\n                    <div class=\"circle\"></div>\r\n                  </div>\r\n\r\n                  <div class=\"gap-patch\">\r\n                    <div class=\"circle\"></div>\r\n                  </div>\r\n\r\n                  <div class=\"circle-clipper right\">\r\n                    <div class=\"circle\"></div>\r\n                  </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n        <div><small>${msg}</small></div>\r\n    </div>\r\n    `;\r\n    document.querySelector(classname).innerHTML = '';\r\n    document.querySelector(classname).innerHTML = content;\r\n};\r\n\r\n\n\n//# sourceURL=webpack://cnapx-trials/./src/utils_src/small_spinner.js?");

/***/ })

}]);